<div class="container" *ngIf="!orderCompleted">
<main>
  <div class="row g-5">
    <div class="col-md-7 col-lg-12">
      <h4 class="mb-3">Оформление заказа</h4>
      <form class="needs-validation" novalidate [formGroup]="checkoutForm">
        <div class="row g-3">
          <div class="col-sm-6">
            <label for="firstName" class="form-label">Имя</label>
            <input type="text" class="form-control" id="firstName" formControlName="firstName" placeholder="Имя" value="" [(ngModel)]="formValues.firstName">
            <div *ngIf="checkoutForm.get('firstName')?.invalid && (checkoutForm.get('firstName')?.touched || checkoutForm.get('firstName')?.dirty)">
              <div class="invalid-feedback" *ngIf="checkoutForm.get('firstName')?.errors?.['required']">
                Введите имя
              </div>
              <div class="invalid-feedback" *ngIf="checkoutForm.get('firstName')?.errors?.['pattern']">
                Поле с именем должно содержать только буквы
              </div>
            </div>
          </div>

          <div class="col-sm-6">
            <label for="lastName" class="form-label">Фамилия</label>
            <input type="text" class="form-control" id="lastName" formControlName="lastName" placeholder="Фамилия" value="" [(ngModel)]="formValues.lastName">
            <div *ngIf="checkoutForm.get('lastName')?.invalid && (checkoutForm.get('lastName')?.touched || checkoutForm.get('lastName')?.dirty)">
              <div class="invalid-feedback" *ngIf="checkoutForm.get('lastName')?.errors?.['required']">
                Введите фамилию
              </div>
              <div class="invalid-feedback" *ngIf="checkoutForm.get('lastName')?.errors?.['pattern']">
                Поле с фамилией должно содержать только буквы
              </div>
            </div>
          </div>


          <div class="col-12">
            <label for="phone" class="form-label">Телефон</label>
            <input type="text" class="form-control" id="phone" formControlName="phone" placeholder="Телефон" [(ngModel)]="formValues.phone">
            <div *ngIf="checkoutForm.get('phone')?.invalid && (checkoutForm.get('phone')?.touched || checkoutForm.get('phone')?.dirty)">
              <div class="invalid-feedback" *ngIf="checkoutForm.get('phone')?.errors?.['required']">
                Введите телефон
              </div>
              <div class="invalid-feedback" *ngIf="checkoutForm.get('phone')?.errors?.['pattern']">
                Поле с телефоном должно содержать 11 цифр
              </div>
            </div>
          </div>


          <div class="col-12">
            <label for="address" class="form-label">Адрес</label>
            <input type="text" class="form-control" id="address" formControlName="address" placeholder="Адрес..." [(ngModel)]="formValues.address">
            <div *ngIf="checkoutForm.get('address')?.invalid && (checkoutForm.get('address')?.touched || checkoutForm.get('address')?.dirty)">
              <div class="invalid-feedback" *ngIf="checkoutForm.get('address')?.errors?.['required']">
                Введите адрес
              </div>
              <div class="invalid-feedback" *ngIf="checkoutForm.get('address')?.errors?.['pattern']">
                Поле с адресом должно содержать: буквы, цифры, пробелы, дефис и /, все остальное запрещено
              </div>
            </div>
          </div>

          <div class="col-12">
            <label for="country" class="form-label">Страна</label>
            <input type="text" class="form-control" id="country" formControlName="country" placeholder="Страна..." [(ngModel)]="formValues.country">
            <div class="invalid-feedback"
                 *ngIf="checkoutForm.get('country')?.invalid && (checkoutForm.get('country')?.touched || checkoutForm.get('country')?.dirty) && checkoutForm.get('country')?.errors?.['required']">
              Введите страну
            </div>
          </div>

          <div class="col-12">
            <label for="zip" class="form-label">Zip</label>
            <input type="text" class="form-control" id="zip" formControlName="zip" placeholder="Zip" [(ngModel)]="formValues.zip">
            <div class="invalid-feedback"
                 *ngIf="checkoutForm.get('zip')?.invalid && (checkoutForm.get('zip')?.touched || checkoutForm.get('zip')?.dirty) && checkoutForm.get('zip')?.errors?.['required']">
              Введите ZIP.
            </div>
          </div>

          <div class="col-12">
            <label for="product" class="form-label">Товар</label>
            <input type="text" class="form-control" id="product" formControlName="product" placeholder="Название чая..." [(ngModel)]="formValues.product" [attr.disabled]="true">
          </div>

          <div class="col-12">
            <label for="comment" class="form-label">Комментарий к заказу</label>
            <textarea class="form-control" id="comment" formControlName="comment" placeholder="Комментарий..." style="height: 100px" [(ngModel)]="formValues.comment"></textarea>
          </div>
        </div>

        <hr class="my-4">

        <button class="w-100 text btn btn-primary btn-group-sm" (click)="createOrder()">Оформить заказ</button>
        <div *ngIf="orderError" class="text-danger mt-3">Произошла ошибка. Попробуйте еще раз.</div>
      </form>
    </div>
  </div>
</main>
</div>

<div class="container" *ngIf="orderCompleted">
  <main class="full-height">
      <div class="text-center">
        <h1>Спасибо за заказ! В ближайшее время мы свяжемся с Вами! </h1>
      </div>
  </main>
</div>
